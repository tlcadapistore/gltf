"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[231],{6010:(t,e,s)=>{s.r(e),s.d(e,{STLLoader:()=>w});var e=s(2718),a=s(5433),r=s(5081),l=s(604),f=s(1695),p=s(428),c=s(4735),u=s(4427);class i{constructor(){this._dataView=new DataView(new ArrayBuffer(0)),this._offset=0}parse(t){this._dataView=new DataView(t,u.W),this._offset=0;const e=this.readUint32(),s=new Float32Array(3*e*3*2);for(let t=0;t<e;++t){const e=this.readFloat32(),r=this.readFloat32(),i=this.readFloat32(),n=this.readFloat32(),l=this.readFloat32(),f=this.readFloat32(),p=this.readFloat32(),c=this.readFloat32(),u=this.readFloat32(),o=this.readFloat32(),h=this.readFloat32(),d=this.readFloat32();this._offset+=2;var a=18*t;s[0+a]=n,s[1+a]=l,s[2+a]=f,s[3+a]=e,s[4+a]=r,s[5+a]=i,s[6+a]=p,s[7+a]=c,s[8+a]=u,s[9+a]=e,s[10+a]=r,s[11+a]=i,s[12+a]=o,s[13+a]=h,s[14+a]=d,s[15+a]=e,s[16+a]=r,s[17+a]=i}return new l.Z({buffers:[new f.t({buffer:new p.f({data:s}),attributes:[{semantic:c.p.POSITION,size:3},{semantic:c.p.NORMAL,size:3}]})]})}readUint32(){var t=this._dataView.getUint32(this._offset,!0);return this._offset+=4,t}readFloat32(){var t=this._dataView.getFloat32(this._offset,!0);return this._offset+=4,t}}var n,o,h=s(4207);(o=n=n||{})[o.SOLID=0]="SOLID",o[o.FACET=1]="FACET",o[o.LOOP=2]="LOOP",o[o.V1=3]="V1",o[o.V2=4]="V2",o[o.V3=5]="V3",o[o.ENDLOOP=6]="ENDLOOP",o[o.ENDFACET=7]="ENDFACET";class d{constructor(){this._state=n.SOLID,this._triangleCount=0,this._data=[],this._currentNormal=[],this._parser={[n.SOLID]:this.parseSolid,[n.FACET]:this.parseFacet,[n.LOOP]:this.parseLoop,[n.V1]:this.parseVertex,[n.V2]:this.parseVertex,[n.V3]:this.parseVertex,[n.ENDLOOP]:this.parseEndLoop,[n.ENDFACET]:this.parseEndFacet}}parse(t){var e=r.W.arraybuffer2string(t).split("\n");this._state=n.SOLID,this._triangleCount=0,this._data=[];for(const t of e)this.parseLine(t);return new l.Z({buffers:[new f.t({buffer:new p.f({data:new Float32Array(this._data)}),attributes:[{semantic:c.p.POSITION,size:3},{semantic:c.p.NORMAL,size:3}]})]})}parseLine(t){t=h.M.trim(t),this._parser[this._state].call(this,t)}parseSolid(t){0===t.indexOf("solid")&&(this._state=n.FACET)}parseFacet(t){t=t.split("facet normal ");t[1]&&(this.parseVector(t[1],this._currentNormal,0),this._state=n.LOOP)}parseLoop(t){0===t.indexOf("outer loop")&&(this._state=n.V1)}parseVertex(t){t=t.split("vertex ");this.parseVector(t[1],this._data,-1),this._data.push(this._currentNormal[0],this._currentNormal[1],this._currentNormal[2]),this._state++}parseEndLoop(t){0===t.indexOf("endloop")&&(this._state=n.ENDFACET)}parseEndFacet(t){0===t.indexOf("endfacet")&&(this._state=n.FACET,this._triangleCount++)}parseVector(t,e,s){var t=(t=h.M.trim(t)).split(/\s+/),a=Number(t[0]),r=Number(t[1]),t=Number(t[2]);-1===s?e.push(a,r,t):(e[s]=a,e[s+1]=r,e[s+2]=t)}}var _=s(4955),F=s(2263),O=s(6646);class w extends e.a{static isBinary(t){t=new Uint8Array(t,0,50);return 0!==h.M.trim(r.W.arraybuffer2string(t)).indexOf("solid")}constructor(t){super(t)}async loadFile(t,e){this._scene.name=t.name;t=await a.P.readAsArraybuffer(t),t=(new(w.isBinary(t)?i:d)).parse(t),t=new _.B({renderNodes:[new F.j({geometry:t,material:new O.q({baseColorFactor:13421772,metallicFactor:.4,roughnessFactor:1})})]});return this._scene.add(t),this}}}}]);